---
name: 使用 goctl 生成数据模型代码
status: open
created: 2025-09-15T03:33:56Z
updated: 2025-09-15T03:33:56Z
github: [Will be updated when synced to GitHub]
depends_on: [002]
parallel: false
conflicts_with: []
---

# Task: 使用 goctl 生成数据模型代码

## Description
基于已定义的数据库 DDL 脚本，使用 goctl 工具生成数据模型代码。自动生成 CRUD 操作、查询方法和数据库连接管理代码，确保数据访问层的规范性和一致性。

## Acceptance Criteria
- [ ] 使用 goctl model 命令生成模型代码
- [ ] 生成所有表的 Model 结构体
- [ ] 生成基础 CRUD 操作方法
- [ ] 生成自定义查询方法
- [ ] 数据库连接池配置
- [ ] 事务支持代码生成
- [ ] 模型代码符合 go-zero 规范

## Technical Details
### goctl 命令执行
```bash
# 从 DDL 生成模型
goctl model mysql ddl -src="*.sql" -dir="./internal/model" -c

# 或者从数据库直接生成
goctl model mysql datasource -url="user:password@tcp(localhost:3306)/task_center" -table="business_systems,tasks,task_executions" -dir="./internal/model" -c
```

### 生成内容
- Model 结构体定义
- 基础 CRUD 方法：
  - Insert, Update, Delete
  - FindOne, FindList
- 自定义查询方法
- 数据库连接管理
- 事务处理方法

### 目录结构
```
internal/model/
├── business_systems_model.go
├── tasks_model.go
├── task_executions_model.go
└── vars.go
```

### 数据库配置
- 连接池设置
- 超时配置
- 读写分离支持

## Dependencies
- [ ] Task 002 - 数据库 DDL 设计完成
- [ ] MySQL 数据库实例
- [ ] goctl 工具安装

## Effort Estimate
- Size: S
- Hours: 8 小时
- Parallel: false (依赖 002 任务)

## Definition of Done
- [ ] 所有表的模型代码生成完成
- [ ] 基础 CRUD 方法可用
- [ ] 数据库连接配置正确
- [ ] 模型单元测试编写完成
- [ ] 数据访问层集成测试通过
- [ ] 代码符合团队规范
---
name: 数据库 DDL 设计和模型定义
status: open
created: 2025-09-15T03:33:56Z
updated: 2025-09-15T05:04:27Z
github: https://github.com/wzzjjboy/task-center/issues/3
depends_on: []
parallel: false
conflicts_with: []
---

# Task: 数据库 DDL 设计和模型定义

## Description
设计和实现 task-center 项目的数据库表结构。包括业务系统表、任务表、执行历史表等核心表的 DDL 定义。这是 go-zero 开发流程的基础步骤，为后续模型代码生成做准备。

## Acceptance Criteria
- [ ] 设计完整的数据库表结构
- [ ] 创建所有表的 DDL 脚本
- [ ] 定义合适的索引和约束
- [ ] 创建数据库迁移脚本
- [ ] 设计表分区策略（如需要）
- [ ] 定义数据清理和归档策略
- [ ] DDL 脚本可以被 goctl 模型生成工具识别

## Technical Details
### 核心表设计
1. **业务系统表 (business_systems)**
   - id, business_code, business_name
   - api_key, api_secret
   - rate_limit, status
   - created_at, updated_at

2. **任务表 (tasks)**
   - id, business_id, business_unique_id
   - callback_url, callback_method
   - retry_intervals, max_retries, current_retry
   - status, priority, tags
   - scheduled_at, next_execute_at
   - created_at, updated_at

3. **任务执行历史表 (task_executions)**
   - id, task_id, execution_sequence
   - execution_time, duration
   - http_status, response_data
   - error_message, retry_after
   - created_at

### 索引策略
- 业务系统查询优化
- 任务状态和执行时间查询
- 执行历史的时间范围查询

### 数据分区
- 执行历史表按月分区
- 大表查询性能优化

## Dependencies
- [ ] MySQL 5.7+ 数据库实例
- [ ] 数据库设计规范确认

## Effort Estimate
- Size: M
- Hours: 16-20 小时
- Parallel: false (与 2 任务串行)

## Definition of Done
- [ ] 所有表的 DDL 脚本创建完成
- [ ] 索引和约束定义完整
- [ ] 迁移脚本可执行
- [ ] 数据库创建和初始化成功
- [ ] 表结构符合 go-zero 模型生成规范
- [ ] DBA 团队审查通过
